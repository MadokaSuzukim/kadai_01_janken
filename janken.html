<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¾¡å€¤è¦³åˆã†åˆã‚ãªã„ï¼ï¼Ÿã‚²ãƒ¼ãƒ </title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div align="center">
        <h2>ä¾¡å€¤è¦³åˆã†åˆã‚ãªã„ï¼ï¼Ÿã‚²ãƒ¼ãƒ </h2>
        ã€Œã‚¹ã‚¿ãƒ¼ãƒˆã€ã‚’æŠ¼ã—ãŸå¾Œã«ã€<br>ä»Šã®å¿ƒã®èª¿å­ã‚’ã€ŒğŸ˜ã€ã€ŒğŸ˜€ã€ã€ŒğŸ˜‚ã€ï¼“ã¤ã®ã‚¹ã‚¿ãƒ³ãƒ—ã‹ã‚‰é¸ã‚“ã§ã­ã€‚<br>
        <br>ç›¸æ‰‹ã®æ„Ÿæƒ…ã¯èª­ã‚ã¾ã›ã‚“ã€‚ã‚ãªãŸã®ä»Šã®çŠ¶æ…‹ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚<br>
        <br>
        <button id="startButton" onclick="start();">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
        <button id="smailButton" onclick="janken('ğŸ˜');" disabled>ğŸ˜</button>
        <button id="nomalButton" onclick="janken('ğŸ˜€');" disabled>ğŸ˜€</button>
        <button id="butButton" onclick="janken('ğŸ˜‚');" disabled>ğŸ˜‚</button>
        <br>
        <table border="1" style="border-collapse: collapse">
            <tr>
                <td align="center"><h2>è²´æ–¹ã®æ„Ÿæƒ… <div id="PlayerHand"> </div></h2></td>
                <td align="center"><h2>ç›¸æ‰‹ã®æ„Ÿæƒ… <div id="RivalHand"> </div></h2></td>
            </tr>
            <br>ä½•ã‚’é¸ã‚“ã§ã‚‚ã€æ­£è§£ä¸æ­£è§£ã¯ã‚ã‚Šã¾ã›ã‚“
        </table>
        <br>
        <div id="Result"></div>
    </div>

    <!-- ãƒ¢ãƒ¼ãƒ€ãƒ«ã®HTML -->
    <div id="resultModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <p id="modalText"></p>
            <button id="retryButton">å†ãƒˆãƒ©ã‚¤</button>
            <a href="https://marumark-98145.bubbleapps.io/signin" target="_blank" class="marumark-button">Marumark</a>
    </div>
        </div>
    </div>

    <script>
        const FPS = 30;
        const HANDS = ['ğŸ˜', 'ğŸ˜€', 'ğŸ˜‚'];
        let lastRivalHandIndex = 0;
        let gameLoopInterbalId = null;

        function gameLoop() {
            const handIndex = (lastRivalHandIndex + 1) % HANDS.length;
            lastRivalHandIndex = handIndex;
            document.getElementById("RivalHand").innerHTML = HANDS[handIndex];
        }

        function start() {
            document.getElementById("startButton").disabled = true;
            document.getElementById("smailButton").disabled = false;
            document.getElementById("nomalButton").disabled = false;
            document.getElementById("butButton").disabled = false;
            document.getElementById("PlayerHand").innerHTML = ' ';
            document.getElementById("Result").innerHTML = '';
            gameLoopInterbalId = setInterval(gameLoop, 1000 / FPS);
        }

        function showModal(result) {
            var modal = document.getElementById('resultModal');
            var modalText = document.getElementById('modalText');
            modalText.innerHTML = result;
            modal.style.display = 'block';

            var closeButton = document.getElementsByClassName('close-button')[0];
            closeButton.onclick = function() {
                modal.style.display = 'none';
            }


            // å†ãƒˆãƒ©ã‚¤ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
         retryButton.onclick = function() {
         modal.style.display = 'none'; // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
         start(); // ã‚²ãƒ¼ãƒ ã‚’å†ã‚¹ã‚¿ãƒ¼ãƒˆ
    }

            window.onclick = function(event) {
                if (event.target == modal) {
                    modal.style.display = 'none';
                }
            }
        }

        function janken(playerHand) {
            clearInterval(gameLoopInterbalId);

            document.getElementById("PlayerHand").innerHTML = playerHand;

            const rivalHand = HANDS[lastRivalHandIndex];
            let result = "";

            // çµæœã®åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯
            if (playerHand === rivalHand) {
                result = "ä¾¡å€¤è¦³åˆã„ã¾ã™ã­ï¼ã§ã‚‚ã€ä»Šæ—¥ã ã‘ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚ã‚ãªãŸã«ã¨ã£ã¦ã€ãã—ã¦ç›¸æ‰‹ã«ã¨ã£ã¦ã®ä¾¡å€¤è¦³ã‚’èªè­˜ã—ã¦ã„ã‘ãŸã‚‰è‰¯ã„ã§ã™ã­ï¼";
            } else if (playerHand === 'ğŸ˜' && rivalHand === 'ğŸ˜€') {
                result = "ä½•ã‹ã—ã‚‰ã€ä¸ä¸€è‡´ãŒã‚ã‚‹éƒ¨åˆ†ãŒã‚ã‚‹ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€å¯¾è©±ã§æ“¦ã‚Šåˆã‚ã›ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ";
            } else if (playerHand === 'ğŸ˜‚' && rivalHand === 'ğŸ˜') {
                result = "ã‚ãªãŸã®æ„Ÿæƒ…ã‚’é–‹ç¤ºã§ãã‚‹çŠ¶æ…‹ã˜ã‚ƒãªã„ã®ã‹ã‚‚ã—ã‚Œãªã„ã€‚ã—ã‚“ã©ã•ãŒã‚ã£ãŸã‚‰èª°ã‹ã«æ‰“ã¡æ˜ã‘ã‚‹ã®ã‚‚ä¸€ã¤ã§ã™ã€‚";
            } else if (playerHand === 'ğŸ˜‚' && rivalHand === 'ğŸ˜€') {
                result = "ä¾¡å€¤è¦³ã«èª¤è§£ã¯ã¤ãã‚‚ã®ã§ã™ã€‚ã„ã¤ã§ã‚‚å®Œå…¨ã«ç†è§£ã¯ã§ããªã„ã¨ã„ã†ã“ã¨ã‚’é ­ã«å…¥ã‚Œã¦ã€è‡ªåˆ†è‡ªèº«ã®æƒ³ã„ã‚’å…±æœ‰ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚";
            } else if (playerHand === 'ğŸ˜' && rivalHand === 'ğŸ˜‚' || playerHand === 'ğŸ˜€' && rivalHand === 'ğŸ˜‚') {
                result = "è‡ªåˆ†ã«ã¨ã£ã¦è‰¯ã„çŠ¶æ³ã¯ã€ã‚‚ã—ã‹ã—ãŸã‚‰ç›¸æ‰‹ã«ã¨ã£ã¦ã¯ä¸å¿«ãªã®ã‹ã‚‚ã—ã‚Œãªã„ã¨è€ƒãˆã¦ã¿ã¦ã‚‚è‰¯ã„ã§ã™ã­ã€‚";
            } else if (playerHand === 'ğŸ˜€' && rivalHand === 'ğŸ˜' ) {
                result = "è‡ªåˆ†ã«ã¨ã£ã¦ã®çŠ¶æ³ã¯ã€ã‚‚ã—ã‹ã—ãŸã‚‰ç›¸æ‰‹ã«ã¯ã‚ˆã„å°è±¡ã‚’ä¸ãˆã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã¨è€ƒãˆã¦ã¿ã¦ã‚‚è‰¯ã„ã§ã™ã­ã€‚";
            }else {
                result = "çš†é•ã£ã¦å½“ãŸã‚Šå‰ã§ã™ã‚ˆã­ï¼è‰¯ã‹ã£ãŸã‚‰ã‚‚ã†ä¸€åº¦è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚";
            }

            showModal(result); // çµæœã‚’ãƒ¢ãƒ¼ãƒ€ãƒ«ã§è¡¨ç¤º

            // ãƒœã‚¿ãƒ³ã®çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆ
            document.getElementById("startButton").disabled = false;
            document.getElementById("smailButton").disabled = true;
            document.getElementById("nomalButton").disabled = true;
            document.getElementById("butButton").disabled = true;
        }
    </script>
</body>
</html>





